<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shad's Simple Web Browser</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }
    #navbar {
      display: flex;
      background-color: #333;
      padding: 10px;
      align-items: center;
    }
    #navbar input {
      flex: 1;
      padding: 8px;
      border: none;
      border-radius: 4px;
      margin: 0 10px;
    }
    #navbar button {
      background-color: #555;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
    }
    #browser-frame {
      width: 100%;
      height: calc(100vh - 50px);
      border: none;
    }
  </style>
</head>
<body>

  <div id="navbar">
    <button onclick="goBack()">‚Üê</button>
    <button onclick="goForward()">‚Üí</button>
    <button onclick="reloadPage()">‚ü≥</button>
    <input type="text" id="urlInput" placeholder="Enter URL or search...">
    <button onclick="navigate()">Go</button>
    <button onclick="goHome()" style="margin-left: 10px;">üè† Home</button>
  </div>

  <iframe id="browser-frame"></iframe>

  <script>
    const iframe = document.getElementById('browser-frame');
    const urlInput = document.getElementById('urlInput');
    let browserHistory = [];
    let historyIndex = -1;

    function showHome() {
      const homeHTML = `<!DOCTYPE html>
<html>
<head><style>* { margin: 0; padding: 0; box-sizing: border-box; }body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; }.container { text-align: center; background: white; padding: 50px; border-radius: 10px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); max-width: 600px; }h1 { color: #333; margin-bottom: 20px; font-size: 40px; }.search-box { display: flex; gap: 10px; margin-bottom: 30px; }input { flex: 1; padding: 12px 20px; border: 1px solid #ddd; border-radius: 24px; font-size: 16px; }button { padding: 12px 30px; background: #667eea; color: white; border: none; border-radius: 24px; cursor: pointer; font-size: 16px; }button:hover { background: #764ba2; }.links { margin-top: 30px; }a { display: inline-block; margin: 10px 15px; color: #667eea; text-decoration: none; font-size: 14px; }a:hover { text-decoration: underline; }</style></head>
<body><div class="container"><h1>üåê Web Browser</h1><p style="color: #666; margin-bottom: 20px;">A simple browser for local files and web navigation</p><div class="search-box"><input type="text" id="homeSearch" placeholder="Search or enter URL..."><button onclick="search()">Search</button></div><div class="links"><a href="javascript:void(0)" onclick="top.openURL('https://example.com')">Example</a><a href="javascript:void(0)" onclick="top.openURL('https://wikipedia.org')">Wikipedia</a><a href="javascript:void(0)" onclick="top.openURL('https://github.com')">GitHub</a></div><p style="color: #999; margin-top: 40px; font-size: 12px;">üí° Tip: Type a local file path like "file:///C:/path/to/file.html" to view local files</p></div><script>function search() { const query = document.getElementById('homeSearch').value; if (query) { if (query.startsWith('file://') || query.includes('.html') || query.includes(':\\\\')) { top.openURL(query); } else { top.openURL('https://www.google.com/search?q=' + encodeURIComponent(query)); }}}document.getElementById('homeSearch').addEventListener('keypress', function(e) { if (e.key === 'Enter') search(); });<\/script></body>
</html>`;
      iframe.srcdoc = homeHTML;
      urlInput.value = 'Home';
    }

    function normalizeURL(url) {
      url = url.trim();
      if (!url) return null;
      if (url.toLowerCase() === 'home') return 'home';
      if (url.startsWith('file://') || url.startsWith('C:\\') || url.includes('.html')) return url.startsWith('file://') ? url : 'file:///' + url.replace(/\\/g, '/');
      if (url.startsWith('http://') || url.startsWith('https://')) return url;
      if (url.includes('.')) return 'https://' + url;
      return 'https://www.google.com/search?q=' + encodeURIComponent(url);
    }

    function openURL(url) {
      const normalized = normalizeURL(url);
      if (!normalized) return;
      
      historyIndex++;
      browserHistory = browserHistory.slice(0, historyIndex);
      browserHistory.push(normalized);
      
      urlInput.value = normalized;
      
      if (normalized === 'home') {
        showHome();
      } else if (normalized.startsWith('file://') || normalized.startsWith('C:\\')) {
        iframe.src = normalized;
      } else {
        // Load external URLs with a proxy or direct attempt
        loadExternalURL(normalized);
      }
    }

    function loadExternalURL(url) {
      // Try multiple methods to load external content
      try {
        // Method 1: Try direct load first
        iframe.src = url;
        
        // Set a timeout to check if it failed
        setTimeout(() => {
          try {
            if (!iframe.contentDocument || iframe.contentDocument.body === null) {
              // If direct load failed, try with text/html
              fetch(url, { mode: 'cors' })
                .then(r => r.text())
                .then(html => {
                  iframe.srcdoc = html;
                })
                .catch(e => {
                  // Last resort: show info page
                  showErrorPage(url);
                });
            }
          } catch (e) {
            // Cross-origin, try fetch
            fetch(url, { mode: 'cors' })
              .then(r => r.text())
              .then(html => {
                iframe.srcdoc = html;
              })
              .catch(err => {
                showErrorPage(url);
              });
          }
        }, 2000);
      } catch (e) {
        showErrorPage(url);
      }
    }

    function showErrorPage(url) {
      const errorHTML = `<!DOCTYPE html>
<html>
<head><style>* { margin: 0; padding: 0; }body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 40px; }h1 { color: #d32f2f; }p { color: #666; line-height: 1.6; margin: 10px 0; }.url { background: #fff; padding: 15px; border-left: 4px solid #d32f2f; margin: 20px 0; word-break: break-all; font-family: monospace; }</style></head>
<body><h1>‚ö†Ô∏è Cannot Load Page</h1><p>Due to browser security restrictions, external websites cannot be loaded directly inside an iframe.</p><div class="url"><strong>URL:</strong><br>${url}</div><p><strong>Solutions:</strong></p><ul><li>Use local HTML files (file:/// paths)</li><li>Install this as a server application</li><li>Use a browser extension</li></ul><p><a href="javascript:top.goHome()" style="color: #667eea; text-decoration: none;">‚Üê Return to Home</a></p></body>
</html>`;
      iframe.srcdoc = errorHTML;
    }

    function navigate() {
      const url = urlInput.value;
      if (url === '' || url === 'Home') {
        showHome();
      } else {
        openURL(url);
      }
    }

    urlInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        navigate();
      }
    });

    function reloadPage() {
      const currentURL = browserHistory[historyIndex];
      if (currentURL && !currentURL.startsWith('http')) {
        iframe.src = currentURL;
      } else {
        try {
          iframe.contentWindow.location.reload();
        } catch (e) {
          console.log('Cannot reload external pages');
        }
      }
    }

    function goBack() {
      if (historyIndex > 0) {
        historyIndex--;
        const url = browserHistory[historyIndex];
        urlInput.value = url;
        if (url === 'home') {
          showHome();
        } else if (url.startsWith('file://') || url.startsWith('C:\\')) {
          iframe.src = url;
        } else {
          loadExternalURL(url);
        }
      }
    }

    function goForward() {
      if (historyIndex < browserHistory.length - 1) {
        historyIndex++;
        const url = browserHistory[historyIndex];
        urlInput.value = url;
        if (url === 'home') {
          showHome();
        } else if (url.startsWith('file://') || url.startsWith('C:\\')) {
          iframe.src = url;
        } else {
          loadExternalURL(url);
        }
      }
    }

    function goHome() {
      openURL('home');
    }

    // Start with home page
    showHome();
  </script>

</body>
</html>